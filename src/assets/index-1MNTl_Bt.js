import{x as _,a6 as g}from"./index-Ch2xGh_u.js";import{B as y,N as I,a as k,ar as L,w,I as u,Z as E,C as v,D as l,O as i,U as m,H as n,u as a,P as p,_ as C,p as N,G as x,V as D,aK as T,au as U}from"./vue-opd7UYcs.js";import{u as q,P,a as S}from"./popupForm-Dbxy9zgI.js";import{b as z,T as A,a as B}from"./index-CVqxjh9c.js";import"./index-qsNMGeAX.js";import"./validate-Bdk_hEWy.js";import"./index-CtStWFRv.js";const G={class:"default-main ba-table-box"},R={class:"table-header-operate-text"},J=y({name:"user/scoreLog",__name:"index",setup(F){const{t:e}=_.useI18n(),d=I().query.user_id??"",t=k({userInfo:{}}),r=new z(new g(q),{column:[{type:"selection",align:"center",operator:!1},{label:e("Id"),prop:"id",align:"center",operator:"=",operatorPlaceholder:e("Id"),width:70},{label:e("user.moneyLog.User ID"),prop:"user_id",align:"center",width:70},{label:e("user.moneyLog.User name"),prop:"user.username",align:"center",operator:"LIKE",operatorPlaceholder:e("Fuzzy query")},{label:e("user.moneyLog.User nickname"),prop:"user.nickname",align:"center",operator:"LIKE",operatorPlaceholder:e("Fuzzy query")},{label:e("user.scoreLog.Change points"),prop:"score",align:"center",operator:"RANGE",sortable:"custom"},{label:e("user.moneyLog.Before change"),prop:"before",align:"center",operator:"RANGE",sortable:"custom"},{label:e("user.moneyLog.After change"),prop:"after",align:"center",operator:"RANGE",sortable:"custom"},{label:e("user.moneyLog.remarks"),prop:"memo",align:"center",operator:"LIKE",operatorPlaceholder:e("Fuzzy query"),showOverflowTooltip:!0},{label:e("Create time"),prop:"create_time",align:"center",render:"datetime",sortable:"custom",operator:"RANGE",width:160}],dblClickNotEditColumn:["all"]},{defaultItems:{user_id:d,memo:""}});r.after.onSubmit=()=>{s(r.comSearch.form.user_id)},r.mount(),r.getData(),U("baTable",r);const s=L(o=>{o&&T(o)>0?S(o).then(c=>{t.userInfo=c.data.user}):t.userInfo={}},300);return s(r.comSearch.form.user_id),w(()=>r.comSearch.form.user_id,o=>{r.form.defaultItems.user_id=o,s(o)}),(o,c)=>{const b=u("el-alert"),f=u("el-button"),h=E("blur");return l(),v("div",G,[a(r).table.remark?(l(),i(b,{key:0,class:"ba-table-alert",title:a(r).table.remark,type:"info","show-icon":""},null,8,["title"])):m("",!0),n(A,{buttons:["refresh","add","comSearch","quickSearch","columnDisplay"],"quick-search-placeholder":a(e)("Quick search placeholder",{fields:a(e)("user.moneyLog.User name")+"/"+a(e)("user.moneyLog.User nickname")})},{default:p(()=>[a(N)(t.userInfo)?m("",!0):C((l(),i(f,{key:0,class:"table-header-operate"},{default:p(()=>[x("span",R,D(t.userInfo.username+"(ID:"+t.userInfo.id+") "+a(e)("user.scoreLog.integral")+":"+t.userInfo.score),1)]),_:1})),[[h]])]),_:1},8,["quick-search-placeholder"]),n(B),n(P)])}}});export{J as default};
